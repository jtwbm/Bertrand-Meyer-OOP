# Бертран Мейер. Объектно-ориентированное конструирование программных систем

[Оглавление](https://github.com/jtwbm/Bertrand-Meyer-OOP/blob/master/contents.md)

## 1. Лекция: Качество ПО

[Внешние и внутренние факторы](#link1)
	[Обзор внешних факторов](#link2)
	[Корректность](#link3)
	[Устойчивость](#link4)
	[Расширяемость](#link5)
	

Каждый разработчик ПО должен стремится создавать качественные продукты. В этой книге будут рассмотрены средства и технические приемы, которые позволят значительно улучшить код. 

Качество ПО можно описать комбинацией внешних и внутренних факторов. В этой лекции будут рассмотрены способы их улучшения.

#link1
### Внешние и внутренние факторы

Все мы хотим, чтобы наш продукт был быстрым, надежным, легким в использовании, модульным, структурным и т. д. Все эти определения можно разделить на две большие категории:

- Внутренние факторы (модульность, читаемость кода для разработчиков)
- Внешние факторы (наличие или отсутствие скорости и простоты использования ПО для пользователя)

```no-highlight
Под “Пользователями” стоит понимать не только людей, которые будут взаимодействовать с конечным 
продуктом, но и тех, кто будет непосредственно работать с ним. Например, такое свойство как 
расширяемость, можно отнести к внешним факторам, т. к. представляет интерес для тех, кто закупает 
оборудование или занимается администрированием и поддержкой продукта. Но при этом конечному 
пользователю этот фактор не важен.
```

В конечном итоге, только внешние факторы имеют значение. Но основой для них являются внутренние факторы: чтобы достичь качества, проектировщики должны иметь у себя под рукой инструменты, которые позволят улучшить скрытые от пользователя внутренние процессы.

Далее будет описан набор технических средств для достижения внутреннего качества. Однако стоит держать в уме общую картину, чтобы не уйти в частности. Ведь приемы, направленные на улучшение внутреннего качества, не являются самоцелью. Это лишь средство для достижения главного - внешних качеств продукта.

#link2
## Обзор внешних факторов

Рассмотрим самые важные внешние факторы качества, к которым нужно стремиться при разработке ПО.

#link3
### Корректность (Correctness)

**Корректность** &mdash; это способность ПО выполнять точные задачи так, как это определено в спецификации.

Это одно из важнейших качеств программных продуктов. Ведь если система не выполняет свои прямые задачи, то все остальное (быстродействие, интерфейс и т. д.) не имеет особого значения.

Но легче сказать, чем сделать. Даже на начальном этапе нужно точно определить и специфицировать технические требования к системе, а это довольно трудно.

Методы достижения корректности часто условны. Даже небольшая система ПО использует столь многое, что гарантировать ее корректность на всех уровнях невозможно. Необходим многоуровневый подход:

|      Приложение      	|
|:--------------------:	|
|      Компилятор      	|
| Операционная система 	|
|     Оборудование     	|

Рис. 1.1. Слои в разработке ПО

Условный подход по обеспечению корректности приложения заключается в том, что мы разбиваем программу на несколько уровней и заботимся только о каждом из них по отдельности. При этом предполагается, что нижележащие уровни корректны. Это единственный рабочий подход, который позволяет разделить одно приложение на несколько слоев, и затем на каждой ступени сконцентрироваться на ограниченном круге задач. Нельзя проверить корректность программы на языке высокого уровня, если не предположить, что компилятор корректно реализует язык. И это не слепое доверие компилятору, а разделение большой проблемы на две: проверка корректности компилятора и проверка корректности программы с точки зрения семантики языка программирования.

В методе, описанный в этой книге, слоев больше: разработка ПО основывается на библиотеках компонентов повторного использования, которые включены во многие приложения.

|        Приложение        	|
|:------------------------:	|
| Библиотека приложения... 	|
|   Другие библиотеки...   	|
|    Базовая библиотека    	|
|      Библиотека ядра     	|
|        Компилятор        	|
|   Операционная система   	|
|       Оборудование       	|

Рис. 1.2. Уровни в процессе разработки, включающем повторное использование

Здесь применим тот же подход: следует обеспечить корректность каждой библиотеки и корректность приложения при условии, что нижележащие уровни корректны.

Многие практики считают, что достигнуть корректности ПО можно исключительно средствами тестирования и последующим исправлением ошибок. Мы же ставим более амбициозную цель: в дальнейших лекциях исследуются технические приемы (например, типизация и метод утверждений), направленных на построение ПО, которое корректно с самого начала. Многие из описанных ниже приемов происходят от математических методов формальной спецификации и верификации программ, проходя длинный путь к обеспечению идеала корректности. Тем не менее, исправление ошибок и тестирование остаются необходимыми в качестве средства дополнительной проверки результата.

#link4
### Устойчивость (Robustness)

**Устойчивость** &mdash; это способность ПО соответствующим образом реагировать на аварийные ситуации.

В отличие от корректности, где проверяется соответствие между поведением программы и спецификацией, устойчивость определяет то, что происходит за ее пределами.

![Robustness](/img/lection1/robustness.png)

Рис. 1.3. Устойчивость против корректности

Определение устойчивости более размыто, чем корректность. Здесь невозможно точно указать, что должно произойти с системой в той или иной аварийной ситуации. Если бы это было известно, то аварийный случай стал бы частью спецификации и мы бы вернулись в область корректности.

```no-highlight
Термин "Аварийная ситуация" понадобится нам при изучении обработки исключений (лекция 12). 
Он подразумевает, что понятия нормальной и аварийной ситуации всегда 
относительны по отношению к заданной спецификации. 

Ситуация аварийна, если выходит за рамки спецификации. При расширении спецификации 
аварийные случаи становятся нормальными, даже если являются нежелательными (например, когда 
пользователь ввел некорректные данные).
```

Получается, что под "нормальной" реакцией программы подразумевается не "желательное", а "запланированное" поведение. А так как в любом программном продукте могут возникнуть незапланированные в спецификации случаи, получается что главная роль устойчивости &mdash; удостовериться, что в этих случаях система не приведет к непоправимой ситуации. Как минимум, программа должна вывести сообщение об ошибке и гладко завершить работу или войти в режим "постепенного вывода из работы".

#link5
### Расширяемость (Extendibility)

**Расширяемость** &mdash; это легкость адаптации ПО к изменениям спецификации.

Для небольших программ вопрос адаптации кода для будущих изменений не стоит на первом месте. Однако по мере увеличения масштаба ПО, адаптировать и изменять программу становится все сложнее. Большая система часто напоминает огромный карточный дом, где любое вмешательство может разрушить все строение.

Традиционные подходы к построению ПО не уделяли вопросу расширяемости должного внимания. Чаще всего предполагался идеальный жизненный цикл ПО, где требования не изменяются после завершения первоначальной ступени анализа. Т. е. все последующие процессы был посвещены проектированию и построению фиксированных требований к системе. И этот подход имел право на жизнь в те времена, когда задача состояла в разработке надежных решений фиксированных проблем.

В настоящее же время возникает другой вопрос &mdash; что делать, если проблема трансформируется в ходе ее решения? Постоянно меняются требования, наше к ним понимание, алгоритмы, представление данных, приемы реализации. Поддержка этих изменений является основной целью объектной техологии, т. е. темой этой книги.

Хотя многие технические приемы, улучшающие расширяемость, можно объяснить на небольших примерах, их значимость становится очевидной лишь в больших проектах. Для улучшения расширяемости важны два принципа:

- **Простота построения**: простую архитектуру проекта более легко адаптировать, чем сложную
- **Децентрализация**: чем более автономны модули, тем выше вероятность, что даже если сломаются несколько модулей, это не вызовет цепную реакцию во всей системе.

ОО-метод &mdash; это прежде всего метод создания архитектуры систем, где простота и децентрализация являются основными понятиями, а также постоянными темами обсуждений, ведущих к ОО-принципам. Такой подход позволяет проектировщику производить системы любой сложности, при этом оставляя их гибкими к каким-либо изменениям в будущем.